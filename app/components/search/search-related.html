<div ng-hide="isLoading" ng-class="{'animate-fade-out': isLoading && showChange, 'animate-fade-in': !isLoading && showChange}">
    <div ng-if="hasResults">
        <ul class="noLeftPadding">
            <li ng-repeat="menuItem in menuItems" ng-include="'menuTemplate'" ng-if="!hasResults || menuItem.count > 0"></li>
        </ul>
    </div>
    <div ng-if="!hasResults">
        <ul class="noLeftPadding">
            <li ng-repeat="menuItem in menuItems" ng-include="'menuTemplateInit'"></li>
        </ul>
    </div>
    <div class="progress" ng-show="isLoading">
        <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <script type="text/ng-template" id="menuTemplate">
        <div class="row facet" ng-if="!hasResults || menuItem.count > 0" ng-class="{searchRelatedButton: menuItem.nodeType == null}">
            <a href="#/?facet={{menuItem.nodeLabel.split(' ').join('_')}}" class="col-xs-9">
                <h5>{{ menuItem.nodeLabel }}&nbsp;</h5>
            </a>
            <div class="col-xs-3 text-right">
                <span class="badge" ng-if="menuItem.count">{{ menuItem.count }}</span>
            </div>
        </div>
        <ul ng-if="menuItem.children">
            <li ng-repeat="menuItem in menuItem.children" ng-include="'menuTemplate'" ng-if="!hasResults || menuItem.count > 0" style="background-color: white">
            </li>
        </ul>
    </script>
    <script type="text/ng-template" id="menuTemplateInit">
        <div class="row facet searchRelatedButton">
            <a href="#/?facet={{menuItem.nodeLabel.split(' ').join('_')}}" class="col-xs-12">
                <h5>{{ menuItem.nodeLabel }}&nbsp; <span class="glyphicon glyphicon-menu-right pull-right"></span></h5>
            </a>
        </div>
    </script>
</div>