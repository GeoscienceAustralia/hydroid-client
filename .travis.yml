language: node_js

node_js:
  - stable

before_script:
  - npm install -g bower
  - bower install

before_deploy:
  - echo "building hydroid"
  - chmod +x ./travis/build.sh
  - ./travis/build.sh

deploy:
  - provider: s3
    region: ap-southeast-2
    access_key_id: AKIAITTNVFBKCZRF7VTA
    secret_access_key:
      secure: SnrUnStRbrD82CfzU6RuAd+RwuzGWov7cvpgQEfl7aue6q7IKVa4isO+zdbDwYCI+PeNTuha36qOv4GBr6WEg08DPYy/oJMNVmSZOBn36+RH9q6/7NftdInZvMkhmQ+0U/Mc8sTkp79wPveDuKTJIyK4yBp8Sf6GqLo0pYr7kkba14wZPeCofTc6UzaRcmh+c98vCWXYDqQKgLlaxszBI0HF3clBeiI9JOQ5ywYukL0dOM/rKKaN5CO7FkgZvR1w5UeUwi5rav/agDQVJPgX5h1y/n+SKBvnZef9ZDY4VLprQiWqdKvW7vA7gyxRnYgCvdwTo1CW25tLkDdg6ZNiVMSIuunBWb78ndAodn9tKZ9rM60dh5pNH8Tl75TenEsGWZGBQAGL0jclwgjoUO+C3jXzYw60/5dtUMQw7WyfNQNKIDz4ryrMLuyqBBmRkrES2mw3u8sN+2eWJTc65mpS9fGc+W+xlKYe/7yzkz8x/8W6CcVzFVIMZl1xsHPJt063hkRfH3K9Gg5DAKbd8dQnpumdG6ApP1mBvgmSDJw7lVda+WW4mFnoiIjyfs4OX1SmZQQYNf3Ups2+83q+q2i0xNaP2cPR1xxQ/xEWhRJ+mtPpy6coWMy2kXu0QyUPOzNbKiLymOiGMLzCNI4ciNz8d38oQRQd8Td8g7wSiPSNyc4=
    bucket: hydroid
    local_dir: release
    upload_dir: releases
    skip_cleanup: true
    on:
      branch: master
  - provider: codedeploy
    access_key_id: AKIAITTNVFBKCZRF7VTA
    secret_access_key:
      secure: SnrUnStRbrD82CfzU6RuAd+RwuzGWov7cvpgQEfl7aue6q7IKVa4isO+zdbDwYCI+PeNTuha36qOv4GBr6WEg08DPYy/oJMNVmSZOBn36+RH9q6/7NftdInZvMkhmQ+0U/Mc8sTkp79wPveDuKTJIyK4yBp8Sf6GqLo0pYr7kkba14wZPeCofTc6UzaRcmh+c98vCWXYDqQKgLlaxszBI0HF3clBeiI9JOQ5ywYukL0dOM/rKKaN5CO7FkgZvR1w5UeUwi5rav/agDQVJPgX5h1y/n+SKBvnZef9ZDY4VLprQiWqdKvW7vA7gyxRnYgCvdwTo1CW25tLkDdg6ZNiVMSIuunBWb78ndAodn9tKZ9rM60dh5pNH8Tl75TenEsGWZGBQAGL0jclwgjoUO+C3jXzYw60/5dtUMQw7WyfNQNKIDz4ryrMLuyqBBmRkrES2mw3u8sN+2eWJTc65mpS9fGc+W+xlKYe/7yzkz8x/8W6CcVzFVIMZl1xsHPJt063hkRfH3K9Gg5DAKbd8dQnpumdG6ApP1mBvgmSDJw7lVda+WW4mFnoiIjyfs4OX1SmZQQYNf3Ups2+83q+q2i0xNaP2cPR1xxQ/xEWhRJ+mtPpy6coWMy2kXu0QyUPOzNbKiLymOiGMLzCNI4ciNz8d38oQRQd8Td8g7wSiPSNyc4=
    bucket: hydroid
    key: releases/hydroid.zip
    bundle_type: zip
    application: hydroid
    deployment_group: Hydroid-Client-Dev-Deployment
    region: ap-southeast-2
    on:
      branch: master